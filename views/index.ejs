<div class="main-wrapper">
  <main>
    <!-- FunÃ§Ã£o de tempo decorrido -->
    <%
      function tempoDecorrido(data) {
        const agora = new Date();
        const post = new Date(data);
        const diff = Math.floor((agora - post) / 1000);

        if (diff < 60) return `${diff} segundos`;
        if (diff < 3600) return `${Math.floor(diff / 60)} minutos`;
        if (diff < 86400) return `${Math.floor(diff / 3600)} horas`;
        if (diff < 2592000) return `${Math.floor(diff / 86400)} dias`;

        const dia = post.getDate().toString().padStart(2, '0');
        const mes = (post.getMonth() + 1).toString().padStart(2, '0');
        const ano = post.getFullYear();
        return `em ${dia}/${mes}/${ano}`;
      }
    %>

    <!-- Cards de vagas -->
    <section id="vagas-container" class="card-grid">
      <% if (typeof vagas !== 'undefined' && vagas.length > 0) { vagas.forEach(vaga => { %>
        <div class="card-column">
          <div class="custom-card">
            <div class="card-content">
              <h5><%= vaga.jobTitle %></h5>
              <p><strong>Empresa:</strong> <%= vaga.companyName %></p>
              <p><strong>Local:</strong> <%= vaga.location %></p>
              <p><strong>Tipo:</strong> <%= vaga.jobType %></p>
              <p><strong>ExperiÃªncia:</strong> <%= vaga.experienceLevel %></p>
              <% if (vaga.salary && vaga.salary.length > 0) { %>
                <p><strong>SalÃ¡rio:</strong> <%= vaga.salary %></p>
              <% } %>
              <p class="description"><%= vaga.jobDescription %></p>
              <p class="meta">ğŸ•’ Publicado a <%= tempoDecorrido(vaga.createdAt) %></p>
            </div>
          </div>
        </div>
      <% }) } else { %>
        <div class="no-vagas">
          <h4>Nenhuma vaga disponÃ­vel ainda.</h4>
          <p>Assim que algum usuÃ¡rio publicar uma oportunidade, aparecerÃ¡ aqui!</p>
        </div>
      <% } %>
    </section>

    <!-- Loading spinner -->
    <div id="loading" class="loading-spinner" style="display: none;">
      <span class="spinner"></span>
    </div>
  </main>
</div>
